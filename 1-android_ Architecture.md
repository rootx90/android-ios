---

### **ملخص عملية إقلاع نظام أندرويد وهيكل النظام (Android Architecture)**

يشرح الفيديو عملية إقلاع جهاز أندرويد، بدءًا من لحظة الضغط على زر الطاقة وصولًا إلى تشغيل الهاتف بشكل كامل. يتم تقسيم العملية إلى مراحل رئيسية ثم يتم تناول الطبقات المعمارية الأساسية لنظام أندرويد.

---

### **مراحل عملية إقلاع نظام أندرويد**

#### 1. **تهيئة المكونات المادية (الهاردوير):**
- عند الضغط على زر الطاقة، تصل إشارة كهربائية إلى وحدة المعالجة المركزية (**CPU**).
- يبدأ المعالج بالعمل ويقوم بالاتصال بـ   (**ROM**)، والتي تحتوي على نظام أندرويد المثبت على الجهاز.
  - يمكن أن تكون الـ ROM نوعين:
    - **الروم الأصلية (Stock ROM):** النسخة الرسمية التي تأتي من الشركة المصنعة للجهاز (مثل Samsung ROM لأجهزة سامسونج).
    - **الروم المخصصة (Custom ROM):** نسخة معدلة من نظام أندرويد، يتم تثبيتها بشكل يدوي.

#### 2. **محمل الإقلاع (Bootloader):**
- برنامج صغير يحدد نظام التشغيل الذي سيتم إقلاعه.
- يشبه شاشة اختيار نظام التشغيل في ويندوز.
- عادةً ما يكون مغلقًا (**Locked**) من قبل الشركات المصنعة لأسباب أمنية ومنع التعديلات غير المصرح بها على نظام التشغيل، ولكن يمكن فتحه (**Unlock**) للتعديل.
- يقوم البوت لودر بثلاث مهام رئيسية:
  1. **فحص جدول التقسيم (Partition Table):** يتأكد من سلامة الملفات الهامة على وحدة التخزين.
  2. **تحميل النواة (Kernel):** يبدأ تشغيل نواة نظام التشغيل.
  3. **اختيار نظام التشغيل:** يحدد أي نسخة من نظام التشغيل سيتم إقلاعها (في الغالب تكون نسخة أندرويد واحدة).

#### 3. **النواة (Kernel):**
- اللب الأساسي للنظام، المسؤول عن التواصل بين المكونات المادية والبرمجيات.
- تدير الشاشة، المعالج، الذاكرة العشوائية (**RAM**)، البطارية، المستشعرات، وباقي المكونات.
- عند الإقلاع، تقوم النواة بتحميل ملف **boot.img**، الذي يحتوي على ملفات النظام الأساسية وتكوينات الجهاز.
- تبدأ النواة عمليات أساسية مثل إدارة الذاكرة، وبرامج تشغيل المستشعرات، وإدارة الطاقة.

#### 4. **عملية Init (عملية التهيئة الأولية):**
- أول عملية يتم تشغيلها بواسطة النواة.
- عملية بالغة الأهمية لبدء تشغيل باقي أجزاء نظام أندرويد.
- تعتبر عملية أساسية في أنظمة لينكس وأندرويد.

#### 5. **خدمات النظام:**
- تقوم النواة بتشغيل خدمات نظام أندرويد الضرورية، وتشمل الخدمات الأساسية التي يحتاجها نظام أندرويد ليعمل بشكل صحيح:
  - **مدير الأنشطة (Activity Manager):** يدير التطبيقات ودورة حياتها.
  - **مدير الطاقة (Power Manager):** يتحكم في استهلاك البطارية.
  - **خدمات الواي فاي والشبكة (Wi-Fi and Network Services):** تدير الاتصال بالشبكات.

#### 6. **زيجوت (Zygote):**
- **زيجوت** هو العملية الأهم في نظام أندرويد.
- مسؤولة عن بدء تشغيل التطبيقات بكفاءة وسرعة.
- بدلاً من تحميل التطبيقات من الصفر في كل مرة، يقوم زيجوت بإنشاء نسخ جاهزة للتطبيقات يمكن استنساخها بسرعة، مما يجعل بدء تشغيل التطبيقات أسرع بكثير.
- يمكن تعديل زيجوت (**Patching**) لأغراض التخصيص، كما تفعل أدوات مثل **Magisk** لعمل الروت.

#### 7. **واجهة المستخدم (Launcher):**
- بعد تشغيل خدمات النظام، يتم تحميل واجهة المستخدم (**Launcher**).
- تختلف واجهة المستخدم من شركة مصنعة لأخرى (مثل **Samsung One UI**، **Xiaomi MIUI**). وهي ما يراه المستخدم ويتفاعل معه مباشرة.

#### 8. **فك تشفير بيانات المستخدم:**
- إذا كان الجهاز محميًا برقم تعريف شخصي (**PIN**) أو كلمة مرور أو بصمة، يقوم النظام بفك تشفير بيانات المستخدم.
- يحدث هذا بعد بدء التشغيل التلقائي، وهو ضروري للوصول إلى بيانات المستخدم المشفرة. عند إعادة التشغيل لأول مرة بعد إعادة ضبط المصنع، يُطلب عادةً الرقم السري لفك التشفير الأولي قبل تفعيل البصمة.

#### 9. **تطبيقات البدء التلقائي:**
- تبدأ التطبيقات التي تم ضبطها على البدء التلقائي في التشغيل (مشابه لتطبيقات بدء التشغيل في أنظمة التشغيل الأخرى).
- أمثلة: خدمات جوجل، وتطبيقات التواصل الاجتماعي (**واتساب، فيسبوك ماسنجر**)، وتطبيقات **VPN**، وغيرها.

---

### **طبقات معمارية أندرويد (ما وراء عملية الإقلاع)**

#### 1. **طبقة تجريد الأجهزة (HAL - Hardware Abstraction Layer):**
- طبقة وسيطة حيوية بين المكونات المادية ونظام أندرويد (البرمجيات).
- تعمل كجسر، مما يسمح لنظام التشغيل بالتفاعل مع الأجهزة (الكاميرات، المستشعرات، إلخ) بطريقة موحدة.
- **سبب وجود HAL:** لتجنب اضطرار الشركات المصنعة لتعديل نظام أندرويد الأساسي لكل مكون مادي جديد. توفر HAL واجهة برمجة تطبيقات (**API**) ثابتة للتفاعل مع الأجهزة، مما يسهل عملية تطوير وتوافق الأجهزة المختلفة مع نظام أندرويد.

#### 2. **بيئة تشغيل أندرويد (ART - Android Runtime):**
- البيئة المسؤولة عن تشغيل تطبيقات أندرويد.
- حلّت محل **Dalvik**، التي كانت تستخدم قبل أندرويد 5.0 (**Lollipop**).
  - **Dalvik (قبل أندرويد 5.0):** استخدمت تقنية الترجمة الفورية (**JIT - Just-In-Time compilation**). كان يتم ترجمة الكود أثناء التشغيل، مما أدى إلى أداء أبطأ للتطبيقات واستهلاك أكبر للبطارية.
  - **ART (أندرويد 5.0 والإصدارات الأحدث):** تستخدم تقنية الترجمة المسبقة (**AOT - Ahead-of-Time compilation**). يتم ترجمة التطبيقات قبل التشغيل (أثناء التثبيت)، مما ينتج عنه:
    - **بدء تشغيل أسرع للتطبيقات.**
    - **تحسين الأداء العام.**
    - **تحسين عمر البطارية.**
    - **تحسين جمع البيانات المهملة (Garbage Collection) لإدارة أفضل للذاكرة.**
  - **عيوب:** قد تكون أحجام التطبيقات أكبر بسبب الكود المترجم مسبقًا.
  - تستخدم أجهزة أندرويد الحديثة **ART** حصريًا. تم استبدال Dalvik بـ ART اعتبارًا من أندرويد 5.0 (**Lollipop**) بسبب المشاكل في Dalvik المتعلقة بالأداء واستهلاك البطارية.

#### 3. **بايندر (Binder) - الاتصال بين العمليات (IPC - Inter-Process Communication):**
- آلية تمكن التطبيقات من التواصل مع بعضها البعض داخل نظام أندرويد.
- يستخدم أندرويد الحماية المعزولة (**Sandboxing**) لأسباب أمنية، حيث يتم عزل كل تطبيق عن الآخر لمنع استغلال التطبيقات لبعضها البعض.
- **بايندر** يسمح بالتواصل الآمن والمنظم بين التطبيقات المعزولة.
- عندما يحتاج تطبيق للوصول إلى مورد نظام (موقع، كاميرا، بلوتوث، إلخ)، يستخدم **بايندر** لطلب الإذن من النظام.
- يعمل **بايندر** كوسيط بين التطبيقات وخدمات النظام، حيث يتلقى الطلبات وينفذها بشكل آمن. يضمن الأمن من خلال عزل التطبيقات عن بعضها البعض (**sandboxing**)، لكن **بايندر** يسمح بالتواصل الآمن والمنظم بين هذه التطبيقات عند الحاجة.

---

### **الخلاصة:**

يقدم الفيديو شرحًا مفصلًا لعملية إقلاع نظام أندرويد ويحدد الطبقات المعمارية الرئيسية، مع تسليط الضوء على وظائف المكونات الهامة مثل:
- **البوت لودر:** المسؤول عن تحميل نظام التشغيل.
- **النواة (Kernel):** القلب الأساسي للنظام، الذي يدير الموارد المادية.
- **زيجوت (Zygote):** الذي يسرع تشغيل التطبيقات.
- **HAL:** الطبقة الوسيطة بين العتاد والبرمجيات.
- **ART:** البيئة الجديدة لتشغيل التطبيقات بكفاءة.
- **بايندر:** الذي يتيح التواصل الآمن بين التطبيقات.

يؤكد الفيديو على تطور بيئة تشغيل أندرويد من **Dalvik** إلى **ART** وأهمية **HAL** و**بايندر** لتجريد الأجهزة والاتصال بين العمليات على التوالي.

--- 
